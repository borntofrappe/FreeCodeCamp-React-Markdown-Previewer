import React from 'react';
import marked from 'marked';
import './OutputArea.css';

// with a stateless functional component, render a div which nests as HTML content the string result of the marked.js library
const OutputArea = (props) => {
  // Marked.js allows the inclusion of a function which transforms markdown syntax into HTML elements
  // this function is generated by reference to 1) set arbitrary options and 1) transform the desired string 
  // IMPORTANT: the function needs to be imported as in the top of this document  

  // a renderer object is created to format anchor link elements as demanded by one of the user stories
  const renderer = new marked.Renderer();

  // format the anchor link elements to set the attribute of target to _blank, and open all anchor link elements on a new page
  renderer.link = function(href, title, text) {
    return `
            <a href=${href} target="_blank">
              ${text}
            </a>`;
  };

  // look at the documentation for slightly more information on the options
  // breaks allows to include hard ans soft line breaks.
  // renderer includes the renderer function which formats the anchor link elements as desired
  // xhtml allows to properly include self-closing elements like <br/>
  marked.setOptions({
    breaks: true,
    renderer: renderer,
    xhtml: true
  });

  // include the markdown result in the HTML of the div
  return (
    <div className="OutputArea" id="preview" dangerouslySetInnerHTML={{ __html: marked(props.textarea) }}>
    </div>
  );
}

export default OutputArea;
